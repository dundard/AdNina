@{
    ViewData["Title"] = "Reklam Kampanyanı Başlat";
}

<!-- Home Page - Landing (001) -->
<div class="min-h-[70vh] grid place-items-center bg-bg">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <!-- Hero Content -->
        <div class="space-y-8">
            <!-- Title -->
            <div class="space-y-4">
                <h1 class="heading text-3xl sm:text-4xl lg:text-5xl font-bold text-text">
                    Hangi sayfayı tanıtmak istersiniz?
                </h1>
                <p class="text-lg sm:text-xl text-muted max-w-2xl mx-auto">
                    Web sitenizin URL'sini girin ve AI destekli reklam kampanyanızı oluşturmaya başlayın
                </p>
            </div>

            <!-- URL Input Form -->
            <div class="max-w-2xl mx-auto">
                <form id="url-form" asp-action="Index" method="post" class="space-y-6">
                    <!-- Neumorphic URL Input -->
                    <div class="relative">
                        <div class="neumorphic-input rounded-xl2 p-4 flex items-center space-x-4">
                            <!-- Pulsing indicator -->
                            <div class="relative">
                                <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                                <div class="absolute inset-0 w-3 h-3 bg-green-500 rounded-full animate-ping opacity-75"></div>
                            </div>
                            
                            <!-- URL Input -->
                            <input 
                                type="url" 
                                id="url-input"
                                name="url"
                                placeholder="https://example.com" 
                                required
                                class="flex-1 text-lg font-medium text-text placeholder-muted bg-transparent outline-none"
                                autocomplete="url"
                            />
                            
                            <!-- Submit Button -->
                            <button 
                                type="submit" 
                                id="start-campaign-btn"
                                class="btn-primary px-6 py-3 rounded-xl2 text-white font-semibold whitespace-nowrap hover:bg-primary600 transition-all hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed"
                                disabled
                            >
                                <span class="hidden sm:inline">Reklam Kampanyanı Başlat</span>
                                <span class="sm:hidden">Başlat</span>
                                <svg class="w-5 h-5 ml-2 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                </svg>
                            </button>
                        </div>
                        
                        <!-- Validation Message -->
                        <div id="url-validation" class="hidden mt-2 text-sm text-red-500">
                            Lütfen geçerli bir URL girin
                        </div>
                    </div>
                    
                    <!-- Help Text -->
                    <p class="text-sm text-muted">
                        Örnek: https://www.siteniz.com, https://shop.markanz.com/urun-sayfasi
                    </p>
                </form>
            </div>

            <!-- Features Preview -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 max-w-4xl mx-auto mt-16">
                <div class="bg-white rounded-xl2 shadow-card p-6 text-center card-hover">
                    <div class="w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg class="w-6 h-6 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path>
                        </svg>
                    </div>
                    <h3 class="heading text-lg font-semibold text-text mb-2">
                        AI Analiz
                    </h3>
                    <p class="text-sm text-muted">
                        Sitenizi otomatik analiz ederek en etkili reklam stratejisini belirleriz
                    </p>
                </div>
                
                <div class="bg-white rounded-xl2 shadow-card p-6 text-center card-hover">
                    <div class="w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg class="w-6 h-6 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"></path>
                        </svg>
                    </div>
                    <h3 class="heading text-lg font-semibold text-text mb-2">
                        Otomatik Optimizasyon
                    </h3>
                    <p class="text-sm text-muted">
                        Kampanyanız sürekli optimize edilerek en iyi performansı elde edersiniz
                    </p>
                </div>
                
                <div class="bg-white rounded-xl2 shadow-card p-6 text-center card-hover">
                    <div class="w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg class="w-6 h-6 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"></path>
                        </svg>
                    </div>
                    <h3 class="heading text-lg font-semibold text-text mb-2">
                        Şeffaf Fiyatlandırma
                    </h3>
                    <p class="text-sm text-muted">
                        Bütçenizi istediğiniz gibi ayarlayın, gizli maliyet yok
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const urlInput = document.getElementById('url-input');
        const submitBtn = document.getElementById('start-campaign-btn');
        const urlForm = document.getElementById('url-form');
        const validation = document.getElementById('url-validation');
        
        // Load saved URL
        const savedState = loadState();
        if (savedState.url) {
            urlInput.value = savedState.url;
            validateAndUpdateButton();
        }
        
        // Real-time validation
        urlInput.addEventListener('input', debounce(function() {
            validateAndUpdateButton();
            // Save to state as user types
            saveState({ url: urlInput.value });
        }, 300));
        
        // Form submission
        urlForm.addEventListener('submit', function(e) {
            e.preventDefault();
            
            const url = urlInput.value.trim();
            if (validateUrl(url)) {
                // Save state and redirect
                saveState({ url: url });
                
                // Show loading state
                submitBtn.disabled = true;
                submitBtn.innerHTML = `
                    <svg class="animate-spin w-5 h-5 mr-2 inline" fill="none" viewBox="0 0 24 24">
                        <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4" class="opacity-25"></circle>
                        <path fill="currentColor" class="opacity-75" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                    Analiz Ediliyor...
                `;
                
                // Redirect after short delay
                setTimeout(() => {
                    window.location.href = '/analyze';
                }, 1000);
            } else {
                showValidationError();
            }
        });
        
        function validateAndUpdateButton() {
            const url = urlInput.value.trim();
            const isValid = url && validateUrl(url);
            
            submitBtn.disabled = !isValid;
            
            if (url && !isValid) {
                showValidationError();
            } else {
                hideValidationError();
            }
        }
        
        function showValidationError() {
            validation.classList.remove('hidden');
            urlInput.parentElement.classList.add('border-red-300');
        }
        
        function hideValidationError() {
            validation.classList.add('hidden');
            urlInput.parentElement.classList.remove('border-red-300');
        }
        
        // Auto-focus on load
        urlInput.focus();
    });
</script>
}